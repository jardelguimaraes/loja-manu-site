<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja Manu Ita√∫na | Moda Feminina</title>
    <meta name="theme-color" content="#7d4e57">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,600;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="top-bar">
        <p><i class="fas fa-gift"></i> Frete Gr√°tis para Ita√∫na nas compras acima de R$ 199,00</p>
    </div>

    <header class="header">
        <div class="container header-content">
            <a href="#" class="logo-link">
                <div class="logo">
                    <img src="img/logo-m.png" alt="Loja Manu" class="logo-img" onerror="this.style.display='none'; document.getElementById('txt-logo').style.display='block'">
                    <div class="logo-text" id="txt-logo"><h1>Loja Manu</h1></div>
                </div>
            </a>
            <nav class="nav-menu" id="nav-menu">
                <a href="#colecao" onclick="toggleMenu()">Cole√ß√£o</a>
                <a href="#sobre" onclick="toggleMenu()">Hist√≥ria</a>
                <a href="#vip" onclick="toggleMenu()">VIP</a>
                <a href="#contato" onclick="toggleMenu()">Contato</a>
            </nav>
            <div class="mobile-menu-icon" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-spacer"></div>
        <div class="hero-content">
            <h1>Sua ess√™ncia,<br>seu estilo.</h1>
            <p>Moda selecionada com carinho para valorizar a mulher real.</p>
            <a href="#colecao" class="btn-hero">Ver Cole√ß√£o</a>
        </div>
    </section>

    <div class="slogan-banner">
        <p>"Exaltando a beleza da mulher incans√°vel que corre atr√°s dos seus sonhos."</p>
    </div>

    <section id="colecao" class="section">
        <div class="container">
            <h2 class="section-title">Nossa Cole√ß√£o</h2>
            
            <div class="sticky-filters">
                <div class="filtros-container">
                    <button class="btn-filtro ativo" onclick="filtrar('todos', this)">Ver Tudo</button>
                    <button class="btn-filtro" onclick="filtrar('Lan√ßamento', this)">‚ú® Lan√ßamentos</button>
                    <button class="btn-filtro" onclick="filtrar('Promo√ß√£o', this)">üî• Promo√ß√£o</button>
                    <button class="btn-filtro" onclick="filtrar('√öltimas Pe√ßas', this)">üíé √öltimas Pe√ßas</button>
                </div>
            </div>
            
            <div class="grid" id="grid-produtos">
                <p style="text-align:center; padding:40px; width:100%;">Carregando produtos...</p>
            </div>
        </div>
    </section>

    <section id="sobre" class="section bg-suave">
        <div class="container text-center">
            <h2 class="section-title">Nossa Trajet√≥ria</h2>
            <div class="text-box">
                <p>A <strong>Loja Manu</strong> √© a concretiza√ß√£o de um sonho de <strong>Raquel Santos</strong>. Com esp√≠rito empreendedor, Raquel sempre acreditou que a moda √© ferramenta de autoestima.</p>
                <p class="signature">Com carinho, Equipe Manu.</p>
            </div>
        </div>
    </section>

    <footer class="footer" id="contato">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-info">
                    <h3>Loja Manu Ita√∫na</h3>
                    <p>Rua Geniplo Dornas, 229 - Centro, Ita√∫na/MG</p>
                    <p>(37) 99914-6764</p>
                </div>
                <div class="social-links-footer">
                    <a href="https://instagram.com/lojamanuitauna" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/5537999146764" target="_blank"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="footer-bottom"><p>&copy; 2026 Loja Manu.</p></div>
        </div>
    </footer>

    <a href="https://wa.me/5537999146764" class="float-zap" target="_blank"><i class="fab fa-whatsapp"></i></a>
    
    <div class="cart-float" onclick="abrirCarrinho()">
        <i class="fas fa-shopping-bag"></i>
        <span class="cart-count" id="cart-count">0</span>
    </div>

    <div id="modal-carrinho" class="modal-overlay" onclick="if(event.target === this) fecharCarrinho()">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Sua Sacola</h2>
                <button class="btn-close" onclick="fecharCarrinho()">√ó</button>
            </div>
            <ul id="itens-carrinho"></ul>
            <div class="cart-footer">
                <div class="cart-total"><span>Total:</span> <span id="total-carrinho">R$ 0,00</span></div>
                <button class="btn-finalizar" onclick="enviarPedidoWhatsApp()">Fechar no WhatsApp</button>
            </div>
        </div>
    </div>

    <script>
        let produtosGlobais = [];
        let carrinho = [];

        document.addEventListener('DOMContentLoaded', () => {
            carregarProdutosDoArquivo();
            carregarCarrinho();
        });

        // --- CARREGAR DO JSON ---
        async function carregarProdutosDoArquivo() {
            try {
                // Tenta carregar o arquivo
                const response = await fetch('produtos.json?v=' + Date.now());
                if (!response.ok) throw new Error('Erro ao ler arquivo');
                
                produtosGlobais = await response.json();
                renderizar(produtosGlobais);
                
            } catch (erro) {
                console.error(erro);
                document.getElementById('grid-produtos').innerHTML = 
                    '<p style="text-align:center; color:red; padding:20px;">Erro ao carregar produtos. Verifique se o arquivo produtos.json existe.</p>';
            }
        }

        function renderizar(lista) {
            const grid = document.getElementById('grid-produtos');
            grid.innerHTML = '';
            
            if(lista.length === 0) {
                grid.innerHTML = '<p style="text-align:center; width:100%;">Nenhum produto encontrado.</p>';
                return;
            }

            lista.forEach(p => {
                let btnHtml = p.esgotado ? 
                    `<button class="btn-buy" disabled style="background:#ccc;">Esgotado</button>` : 
                    `<button class="btn-buy" onclick="adicionarItem('${p.nome}', ${p.preco})">Comprar</button>`;

                const card = `
                    <div class="card-produto">
                        ${p.tag ? `<span class="badge" style="background:${p.tagCor}">${p.tag}</span>` : ''}
                        <div class="img-container">
                            <img src="${p.img}" onerror="this.src='https://via.placeholder.com/300x400?text=Foto'">
                        </div>
                        <div class="info-produto">
                            <h3>${p.nome}</h3>
                            <div class="price-box">
                                <span class="price-new">R$ ${p.preco.toFixed(2).replace('.', ',')}</span>
                                <span class="installments">${p.parcelas || ''}</span>
                            </div>
                            ${btnHtml}
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        }

        function filtrar(tag, btn) {
            document.querySelectorAll('.btn-filtro').forEach(b => b.classList.remove('ativo'));
            btn.classList.add('ativo');
            
            if (tag === 'todos') {
                renderizar(produtosGlobais);
            } else {
                const filtrados = produtosGlobais.filter(p => p.tag && p.tag.toLowerCase().includes(tag.toLowerCase()));
                renderizar(filtrados);
            }
            
            // Elevador
            const secao = document.getElementById('colecao');
            window.scrollTo({ top: secao.offsetTop - 100, behavior: 'smooth' });
        }

        // --- CARRINHO ---
        function carregarCarrinho() {
            const salvo = localStorage.getItem('carrinhoManu');
            if (salvo) carrinho = JSON.parse(salvo);
            atualizarUI();
        }
        function adicionarItem(nome, preco) {
            const item = carrinho.find(i => i.nome === nome);
            if (item) item.qtd++;
            else carrinho.push({ nome, preco, qtd: 1 });
            salvar(); abrirCarrinho();
        }
        function salvar() {
            localStorage.setItem('carrinhoManu', JSON.stringify(carrinho));
            atualizarUI();
        }
        function atualizarUI() {
            document.getElementById('cart-count').innerText = carrinho.reduce((acc, i) => acc + i.qtd, 0);
            const lista = document.getElementById('itens-carrinho');
            lista.innerHTML = '';
            let total = 0;
            carrinho.forEach((item, idx) => {
                total += item.preco * item.qtd;
                lista.innerHTML += `<li class="item-carrinho"><div>${item.qtd}x ${item.nome}</div> <div>R$ ${(item.preco*item.qtd).toFixed(2)} <i class="fas fa-trash" style="color:red; margin-left:10px; cursor:pointer;" onclick="remover(${idx})"></i></div></li>`;
            });
            document.getElementById('total-carrinho').innerText = 'R$ ' + total.toFixed(2);
        }
        function remover(idx) { carrinho.splice(idx, 1); salvar(); }
        function enviarPedidoWhatsApp() {
            if(carrinho.length === 0) return alert('Sacola vazia!');
            let msg = "Ol√°! Pedido pelo site:\n";
            carrinho.forEach(i => msg += `- ${i.qtd}x ${i.nome}\n`);
            msg += `Total: ${document.getElementById('total-carrinho').innerText}`;
            window.open(`https://wa.me/5537999146764?text=${encodeURIComponent(msg)}`);
        }

        function toggleMenu() { document.getElementById('nav-menu').classList.toggle('active'); }
        function abrirCarrinho() { document.getElementById('modal-carrinho').classList.add('open'); }
        function fecharCarrinho() { document.getElementById('modal-carrinho').classList.remove('open'); }
    </script>
</body>
</html>
