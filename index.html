<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja Manu | Moda Feminina</title>
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#7d4e57">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <div class="top-bar">
        <p><i class="fas fa-gift"></i> Frete Gr√°tis para Ita√∫na nas compras acima de R$ 199,00</p>
    </div>

    <header class="header">
        <div class="container header-content">
            <a href="#" class="logo-link">
                <div class="logo">
                    <img src="img/logo-m.png" alt="Logo Manu" class="logo-img">
                    <div class="logo-text">
                        <h1>Loja Manu Ita√∫na</h1>
                    </div>
                </div>
            </a>
            
            <nav class="nav-menu" id="nav-menu">
                <a href="#colecao" onclick="toggleMenu()">Cole√ß√£o</a>
                <a href="#sobre" onclick="toggleMenu()">Hist√≥ria</a>
                <a href="#vip" onclick="toggleMenu()">VIP</a>
                <a href="https://www.instagram.com/lojamanuitauna/" target="_blank">Instagram</a>
                <a href="#contato" onclick="toggleMenu()">Contato</a>
            </nav>

            <div class="mobile-menu-icon" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-overlay">
            <div class="hero-content">
                <h2>Sua ess√™ncia,<br>seu estilo.</h2>
                <p>Moda selecionada com carinho para valorizar a mulher real.</p>
                <a href="#colecao" class="btn-hero">Ver Cole√ß√£o</a>
            </div>
        </div>
    </section>

    <div class="slogan-banner">
        <p>"Exaltando a beleza da mulher incans√°vel que corre atr√°s dos seus sonhos."</p>
    </div>

    <section id="colecao" class="section">
        <div class="container">
            <h2 class="section-title">Nossa Cole√ß√£o</h2>
            
            <div class="filtros-container">
                <button class="btn-filtro ativo" onclick="filtrarPorTag('todos', this)">Ver Tudo</button>
                <button class="btn-filtro" onclick="filtrarPorTag('Lan√ßamento', this)">‚ú® Lan√ßamentos</button>
                <button class="btn-filtro" onclick="filtrarPorTag('Promo√ß√£o', this)">üî• Promo√ß√£o</button>
                <button class="btn-filtro" onclick="filtrarPorTag('√öltimas Pe√ßas', this)">üíé √öltimas Pe√ßas</button>
            </div>

            <div class="search-container">
                <input type="text" id="campo-busca" placeholder="üîç O que voc√™ procura hoje? (ex: vestido, jeans)...">
            </div>
            
            <div class="grid" id="grid-produtos">
                <p style="text-align:center; width:100%; color:#888;">Atualizando vitrine...</p>
            </div>
        </div>
    </section>

    <section class="reviews-section section">
        <div class="container">
            <h2 class="section-title">Quem usa, se apaixona</h2>
            <p style="text-align: center; color: #888; margin-top: -30px; margin-bottom: 50px;">O carinho de nossas clientes VIP.</p>
            
            <div class="review-grid">
                <div class="review-card">
                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Cliente" class="client-photo">
                    <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="review-text">"Estou encantada com a qualidade! O conjunto de alfaiataria vestiu perfeitamente. O atendimento da Raquel foi impec√°vel."</p>
                    <div><p class="client-name">Fernanda Oliveira</p><span class="client-location">Cliente VIP</span></div>
                </div>

                <div class="review-card">
                    <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Cliente" class="client-photo">
                    <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="review-text">"As roupas s√£o ainda mais lindas pessoalmente. Comprei o vestido floral e recebi muitos elogios. A entrega em Ita√∫na foi super r√°pida!"</p>
                    <div><p class="client-name">Juliana Costa</p><span class="client-location">Cliente VIP</span></div>
                </div>

                <div class="review-card">
                    <img src="https://randomuser.me/api/portraits/women/90.jpg" alt="Cliente" class="client-photo">
                    <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="review-text">"A Loja Manu virou meu v√≠cio! Toda semana tem novidade e pre√ßo justo. Amo como as pe√ßas valorizam meu corpo."</p>
                    <div><p class="client-name">Mariana Dias</p><span class="client-location">Cliente VIP</span></div>
                </div>

                 <div class="review-card">
                    <img src="https://randomuser.me/api/portraits/women/33.jpg" alt="Cliente" class="client-photo">
                    <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="review-text">"Nunca vi um atendimento assim em loja online. Me senti super acolhida e as roupas chegaram cheirosas! Recomendo mil vezes."</p>
                    <div><p class="client-name">Patr√≠cia Souza</p><span class="client-location">Cliente VIP</span></div>
                </div>

                <div class="review-card">
                    <img src="https://randomuser.me/api/portraits/women/12.jpg" alt="Cliente" class="client-photo">
                    <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="review-text">"Comprei um vestido para um casamento e foi sucesso total. Tecido maravilhoso e caimento perfeito. Obrigada Manu!"</p>
                    <div><p class="client-name">Camila Rocha</p><span class="client-location">Cliente VIP</span></div>
                </div>
            </div>
            
            <a href="https://www.instagram.com/lojamanuitauna/" target="_blank" class="btn-social-proof">
                <i class="fab fa-instagram"></i> Ver mais clientes no Instagram
            </a>
        </div>
    </section>

    <section id="sobre" class="section bg-suave">
        <div class="container text-center">
            <h2 class="section-title-left" style="text-align: center;">Nossa Trajet√≥ria</h2>
            <div class="text-box">
                <p>A <strong>Loja Manu</strong> √© a concretiza√ß√£o de um sonho de <strong>Raquel Santos</strong>. Com esp√≠rito empreendedor, Raquel sempre acreditou que a moda √© ferramenta de autoestima.</p>
                <p>Mulher incans√°vel, transformou sua paix√£o em um espa√ßo acolhedor em Ita√∫na, trazendo excel√™ncia para mulheres que n√£o param nunca.</p>
                <p class="signature">Com carinho, Equipe Manu.</p>
            </div>
        </div>
    </section>

    <section id="vip" class="section">
        <div class="container text-center">
            <h2 class="section-title">Clube VIP</h2>
            <p style="margin-bottom: 20px; font-size: 1.1rem; color: #666;">
                Entre para nossa lista exclusiva e fique por dentro das novidades.
            </p>
            <form id="form-vip" class="compact-form">
                <div class="input-row">
                    <input type="text" id="nome" class="form-input" placeholder="Seu Nome" required>
                    <input type="text" id="whatsapp" class="form-input" placeholder="Seu WhatsApp" required>
                </div>
                <button type="submit" id="btn-enviar" class="btn-full">QUERO ENTRAR</button>
                <p id="msg-status" style="margin-top:10px; font-weight:bold;"></p>
            </form>
        </div>
    </section>

    <footer class="footer" id="contato">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-info">
                    <h3>Loja Manu Ita√∫na</h3>
                    <p style="margin-bottom: 20px; font-style: italic; color: #ffdee6;">Moda com Prop√≥sito.</p>
                    <div class="address-box">
                        <i class="fas fa-map-marker-alt icon-map"></i>
                        <div>
                            <strong>Rua Geniplo Dornas, 229</strong><br>
                            Centro, Ita√∫na ‚Äì MG
                        </div>
                    </div>
                </div>
                <div class="footer-map">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3744.9723224765796!2d-44.58552682398579!3d-20.176882281268685!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xa0ae6522204595%3A0x6331908616186b86!2sR.%20Geniplo%20Dornas%2C%20229%20-%20Centro%2C%20Ita%C3%BAna%20-%20MG%2C%2035680-033!5e0!3m2!1spt-BR!2sbr!4v1704830000000!5m2!1spt-BR!2sbr" 
                        width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
            <div class="social-links-footer">
                <a href="https://www.instagram.com/lojamanuitauna/" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="https://wa.me/5537999146764" target="_blank"><i class="fab fa-whatsapp"></i></a>
            </div>
            <div class="footer-bottom">
                <p class="copyright">¬© 2026 Loja Manu. Todos os direitos reservados.</p>
                <p class="developer">By <strong>JGAutoma√ß√µes.AI</strong></p>
            </div>
        </div>
    </footer>

    <a href="https://wa.me/5537999146764" target="_blank" class="float-zap"><i class="fab fa-whatsapp"></i></a>

    <div class="cart-float" onclick="abrirCarrinho()">
        <i class="fas fa-shopping-bag" style="font-size: 1.5rem;"></i>
        <span class="cart-count" id="cart-count">0</span>
    </div>

    <div id="modal-carrinho" class="modal-overlay">
        <div class="modal-content">
            
            <div class="modal-header">
                <h2><i class="fas fa-shopping-bag"></i> Sua Sacola</h2>
                <button class="btn-close" onclick="fecharCarrinho()">√ó</button>
            </div>
            
            <ul id="itens-carrinho">
                </ul>

            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span id="total-carrinho">R$ 0,00</span>
                </div>
                <button class="btn-finalizar" onclick="enviarPedidoWhatsApp()">
                    <i class="fab fa-whatsapp" style="font-size:1.3rem;"></i> Fechar Pedido no Zap
                </button>
            </div>

        </div>
    </div>

   <script>
        document.addEventListener('DOMContentLoaded', function() {
            carregarProdutos();
            carregarCarrinho();
        });

        let produtosGlobais = [];

        // --- CARREGAR PRODUTOS ---
        async function carregarProdutos() {
            try {
                const response = await fetch('produtos.json?v=' + Date.now());
                let produtos = await response.json();
                
                // Ordena√ß√£o: Esgotados para o final
                produtos.sort((a, b) => a.esgotado - b.esgotado);
                
                produtosGlobais = produtos;
                renderizarProdutos(produtos);

            } catch (erro) {
                console.error("Erro:", erro);
                document.getElementById('grid-produtos').innerHTML = '<p style="text-align:center;">Erro ao carregar cole√ß√£o.</p>';
            }
        }

      // --- RENDERIZAR (CORRIGIDO: ESGOTADO COLORIDO) ---
        function renderizarProdutos(lista) {
            const container = document.getElementById('grid-produtos');
            container.innerHTML = ''; 

            if (lista.length === 0) {
                container.innerHTML = '<p style="text-align:center; width:100%; color:#888;">Nenhum produto encontrado.</p>';
                return;
            }

            lista.forEach(produto => {
                const disabledAttr = produto.esgotado ? 'disabled' : '';
                const btnText = produto.esgotado ? 'Esgotado' : '<i class="fab fa-whatsapp"></i> Comprar';
                
                // AQUI EST√Å A MUDAN√áA:
                // Antes tinha grayscale(100%). Agora tirei.
                // opacity(0.5) deixa a foto com 50% de transpar√™ncia, mas COLORIDA.
                const imgFilter = produto.esgotado ? 'filter: opacity(0.5);' : ''; 
                
                // Regra da Etiqueta (Esconde se esgotado)
                let badgeHTML = '';
                if (produto.tag && !produto.esgotado) {
                    badgeHTML = `<span class="badge" style="background: ${produto.tagCor || '#7d4e57'};">${produto.tag}</span>`;
                }

                const card = document.createElement('div');
                card.className = 'card-produto';
                card.innerHTML = `
                    ${badgeHTML}
                    <div class="img-container">
                        <img src="${produto.img}" alt="${produto.nome}" style="${imgFilter}" onerror="this.src='https://via.placeholder.com/300x400?text=Foto'">
                    </div>
                    <div class="info-produto">
                        <h3>${produto.nome}</h3>
                        <div class="price-box">
                            <span class="price-new">R$ ${produto.preco.toFixed(2).replace('.', ',')}</span>
                            ${produto.parcelas ? `<span class="installments">${produto.parcelas}</span>` : ''}
                        </div>
                        <button class="btn-buy" ${disabledAttr} onclick="adicionarItem('${produto.nome}', ${produto.preco})">
                            ${btnText}
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }
        // --- BUSCA ---
        document.getElementById('campo-busca').addEventListener('input', function(e) {
            const termo = e.target.value.toLowerCase();
            const filtrados = produtosGlobais.filter(produto => produto.nome.toLowerCase().includes(termo));
            renderizarProdutos(filtrados);
        });

        // --- FILTROS INTELIGENTES (CORRIGIDO) ---
        function filtrarPorTag(tag, elementoBtn) {
            // Atualiza visual dos bot√µes
            document.querySelectorAll('.btn-filtro').forEach(btn => btn.classList.remove('ativo'));
            elementoBtn.classList.add('ativo');
            document.getElementById('campo-busca').value = '';

            if (tag === 'todos') {
                renderizarProdutos(produtosGlobais);
            } else {
                // CORRE√á√ÉO AQUI: Ignora mai√∫sculas/min√∫sculas para achar o filtro
                const filtrados = produtosGlobais.filter(p => 
                    p.tag && p.tag.toLowerCase().includes(tag.toLowerCase())
                );
                renderizarProdutos(filtrados);
            }
        }

        // --- CARRINHO & OUTRAS FUN√á√ïES (MANTIDAS) ---
        let carrinho = [];

        function carregarCarrinho() {
            const salvo = localStorage.getItem('carrinhoManu');
            if (salvo) {
                try {
                    carrinho = JSON.parse(salvo);
                    carrinho.forEach(item => {
                        if (!item.quantidade || isNaN(item.quantidade)) item.quantidade = 1;
                        if (!item.preco || isNaN(item.preco)) item.preco = 0;
                    });
                    salvarCarrinho();
                    atualizarCarrinhoUI();
                } catch (e) {
                    localStorage.removeItem('carrinhoManu'); carrinho = [];
                }
            }
        }

        function salvarCarrinho() { localStorage.setItem('carrinhoManu', JSON.stringify(carrinho)); }

        function adicionarItem(nome, preco) {
            const itemExistente = carrinho.find(item => item.nome === nome);
            if (itemExistente) { itemExistente.quantidade += 1; } 
            else { carrinho.push({ nome: nome, preco: preco, quantidade: 1 }); }
            salvarCarrinho(); atualizarCarrinhoUI();
            const btnFloat = document.querySelector('.cart-float');
            btnFloat.style.transform = 'scale(1.3)'; setTimeout(() => btnFloat.style.transform = 'scale(1)', 200);
        }

        function alterarQuantidade(index, mudanca) {
            const item = carrinho[index];
            item.quantidade += mudanca;
            if (item.quantidade <= 0) { carrinho.splice(index, 1); }
            salvarCarrinho(); atualizarCarrinhoUI();
        }

        function removerItem(index) {
            carrinho.splice(index, 1); salvarCarrinho(); atualizarCarrinhoUI();
        }

        function atualizarCarrinhoUI() {
            const lista = document.getElementById('itens-carrinho');
            const totalSpan = document.getElementById('total-carrinho');
            const contador = document.getElementById('cart-count');
            
            const totalItens = carrinho.reduce((acc, item) => acc + (item.quantidade || 1), 0);
            contador.innerText = totalItens;
            
            lista.innerHTML = '';
            let totalFinanceiro = 0;

            if (carrinho.length === 0) {
                lista.innerHTML = `<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; color:#999;"><i class="fas fa-shopping-basket" style="font-size:3rem; margin-bottom:15px; color:#ddd;"></i><p>Sua sacola est√° vazia.</p></div>`;
            } else {
                carrinho.forEach((item, index) => {
                    let qtd = item.quantidade || 1; let prc = item.preco || 0;
                    totalFinanceiro += prc * qtd;
                    const li = document.createElement('li');
                    li.className = 'item-carrinho';
                    li.innerHTML = `
                        <div style="flex:1;">
                            <div style="font-weight:700; font-size:1rem; color:#333; margin-bottom:5px;">${item.nome}</div>
                            <div style="font-size:0.9rem; color:#888;">R$ ${prc.toFixed(2).replace('.', ',')}</div>
                        </div>
                        <div class="qty-controls">
                            <button class="btn-qty" onclick="alterarQuantidade(${index}, -1)">-</button>
                            <span style="font-weight:600; min-width:20px; text-align:center;">${qtd}</span>
                            <button class="btn-qty" onclick="alterarQuantidade(${index}, 1)">+</button>
                        </div>
                        <i class="fas fa-trash-alt" style="color:#ff6b6b; cursor:pointer; margin-left:15px; font-size:1.2rem; padding:10px;" onclick="removerItem(${index})"></i>
                    `;
                    lista.appendChild(li);
                });
            }
            if (isNaN(totalFinanceiro)) totalFinanceiro = 0;
            totalSpan.innerText = totalFinanceiro.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        function enviarPedidoWhatsApp() {
            if (carrinho.length === 0) { alert("Sua sacola est√° vazia!"); return; }
            let mensagem = "Ol√°, Loja Manu! Gostaria de fechar meu pedido do site:\n\n";
            let total = 0;
            carrinho.forEach(item => {
                const subtotal = item.preco * item.quantidade;
                mensagem += `‚ñ™Ô∏è (${item.quantidade}x) ${item.nome} - R$ ${subtotal.toFixed(2).replace('.', ',')}\n`;
                total += subtotal;
            });
            mensagem += `\n*TOTAL: ${total.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}*`;
            mensagem += "\n\nAguardo instru√ß√µes de pagamento.";
            const link = `https://wa.me/5537999146764?text=${encodeURIComponent(mensagem)}`;
            window.open(link, '_blank');
        }

        function abrirCarrinho() { document.getElementById('modal-carrinho').classList.add('open'); }
        function fecharCarrinho() { document.getElementById('modal-carrinho').classList.remove('open'); }
        function toggleMenu() { document.getElementById('nav-menu').classList.toggle('active'); }
        
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.header');
            if (window.scrollY > 50) header.classList.add('scrolled'); else header.classList.remove('scrolled');
        });

        document.getElementById('form-vip').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = document.getElementById('btn-enviar');
            const msg = document.getElementById('msg-status');
            btn.innerText = 'Enviando...'; btn.disabled = true;
            const dados = { nome: document.getElementById('nome').value, whatsapp: document.getElementById('whatsapp').value, data: new Date().toISOString() };
            const webhookURL = 'https://webhook.jg.jardelguimaraes.com.br/webhook/cadastro-loja-manu'; 
            fetch(webhookURL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(dados) })
            .then(res => { if (res.ok) { msg.innerText = '‚úÖ Sucesso!'; msg.style.color = 'green'; document.getElementById('form-vip').reset(); } else { throw new Error(); } })
            .catch(() => { msg.innerText = 'Erro.'; msg.style.color = 'red'; })
            .finally(() => { btn.innerText = 'QUERO ENTRAR'; btn.disabled = false; });
        });
   </script>
</body>
</html>
