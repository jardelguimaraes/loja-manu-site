<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja Manu Ita√∫na | Moda Feminina</title>
    
    <meta name="description" content="Loja Manu Ita√∫na - Moda feminina que exalta sua ess√™ncia.">
    <meta name="theme-color" content="#7d4e57">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="top-bar">
        <p><i class="fas fa-gift"></i> Frete Gr√°tis para Ita√∫na nas compras acima de R$ 199,00</p>
    </div>

    <header class="header">
        <div class="container header-content">
            <a href="#" class="logo-link">
                <div class="logo">
                    <img src="img/logo-m.png" alt="Logo Manu" class="logo-img" onerror="this.style.display='none'">
                    <div class="logo-text">
                        <h1>Loja Manu</h1>
                    </div>
                </div>
            </a>

            <nav class="nav-menu" id="nav-menu">
                <a href="#colecao" onclick="toggleMenu()">Cole√ß√£o</a>
                <a href="#sobre" onclick="toggleMenu()">Hist√≥ria</a>
                <a href="#vip" onclick="toggleMenu()">VIP</a>
                <a href="https://www.instagram.com/lojamanuitauna/" target="_blank">Instagram</a>
                <a href="#contato" onclick="toggleMenu()">Contato</a>
            </nav>

            <div class="mobile-menu-icon" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>Sua ess√™ncia,<br>seu estilo.</h1>
            <p>Moda selecionada com carinho para valorizar a mulher real.</p>
            <a href="#colecao" class="btn-hero">Ver Cole√ß√£o</a>
        </div>
    </section>

    <div class="slogan-banner">
        <p>"Exaltando a beleza da mulher incans√°vel que corre atr√°s dos seus sonhos."</p>
    </div>

    <section id="colecao" class="section">
        <div class="container">
            <h2 class="section-title">Nossa Cole√ß√£o</h2>
            
            <div class="sticky-filters">
                <div class="filtros-container">
                    <button class="btn-filtro ativo" onclick="filtrarPorTag('todos', this)">Ver Tudo</button>
                    <button class="btn-filtro" onclick="filtrarPorTag('Lan√ßamento', this)">‚ú® Lan√ßamentos</button>
                    <button class="btn-filtro" onclick="filtrarPorTag('Promo√ß√£o', this)">üî• Promo√ß√£o</button>
                    <button class="btn-filtro" onclick="filtrarPorTag('√öltimas Pe√ßas', this)">üíé √öltimas Pe√ßas</button>
                </div>

                <div class="search-container">
                    <input type="text" id="campo-busca" placeholder="üîç O que voc√™ procura hoje?">
                </div>
            </div>
            
            <div class="grid" id="grid-produtos">
                <p style="text-align:center; width:100%; color:#888; padding: 40px;">Carregando vitrine...</p>
            </div>

            <div class="load-more-container">
                <button id="btn-ver-mais" class="btn-load-more" onclick="carregarMaisProdutos()">
                    Ver Mais Produtos <i class="fas fa-chevron-down"></i>
                </button>
            </div>
        </div>
    </section>

    <section id="sobre" class="section bg-suave">
        <div class="container text-center">
            <h2 class="section-title">Nossa Trajet√≥ria</h2>
            <div class="text-box">
                <p>A <strong>Loja Manu</strong> √© a concretiza√ß√£o de um sonho de <strong>Raquel Santos</strong>. Com esp√≠rito empreendedor, Raquel sempre acreditou que a moda √© ferramenta de autoestima.</p>
                <p class="signature">Com carinho, Equipe Manu.</p>
            </div>
        </div>
    </section>

    <footer class="footer" id="contato">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-info">
                    <h3>Loja Manu Ita√∫na</h3>
                    <p style="margin-bottom: 20px; font-style: italic; color: #ffdee6;">Moda com Prop√≥sito.</p>
                    <p>Rua Geniplo Dornas, 229 - Centro, Ita√∫na/MG</p>
                    <p>(37) 99914-6764</p>
                </div>
                <div class="social-links-footer">
                    <a href="https://www.instagram.com/lojamanuitauna/" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/5537999146764" target="_blank"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Loja Manu. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <a href="https://wa.me/5537999146764" target="_blank" class="float-zap"><i class="fab fa-whatsapp"></i></a>
    <div class="cart-float" onclick="abrirCarrinho()">
        <i class="fas fa-shopping-bag"></i>
        <span class="cart-count" id="cart-count">0</span>
    </div>

    <div id="modal-carrinho" class="modal-overlay" onclick="if(event.target === this) fecharCarrinho()">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Sua Sacola</h2>
                <button class="btn-close" onclick="fecharCarrinho()">√ó</button>
            </div>
            <ul id="itens-carrinho"></ul>
            <div class="cart-footer">
                <div class="cart-total"><span>Total:</span> <span id="total-carrinho">R$ 0,00</span></div>
                <button class="btn-finalizar" onclick="enviarPedidoWhatsApp()">Fechar no WhatsApp</button>
            </div>
        </div>
    </div>

    <script>
        // --- SCRIPT UNIFICADO E CORRIGIDO ---
        document.addEventListener('DOMContentLoaded', function() {
            carregarProdutos();
            carregarCarrinho();
        });

        let produtosGlobais = [];
        let produtosFiltrados = [];
        let itensPorPagina = 12;
        let paginaAtual = 1;
        let carrinho = [];

         // --- CARREGAR PRODUTOS ---
        async function carregarProdutos() {
            try {
                const response = await fetch('produtos.json?v=' + Date.now());
                let produtos = await response.json();
                
                // Ordena√ß√£o: Esgotados para o final
                produtos.sort((a, b) => a.esgotado - b.esgotado);
                
                produtosGlobais = produtos;
                produtosFiltrados = produtos; // Come√ßa exibindo tudo
                
                resetarPaginacao(); // Renderiza a primeira leva
                
            } catch (erro) {
                console.error("Erro:", erro);
                document.getElementById('grid-produtos').innerHTML = '<p style="text-align:center;">Erro ao carregar cole√ß√£o.</p>';
            }
        }

        function resetarPaginacao() {
            paginaAtual = 1;
            document.getElementById('grid-produtos').innerHTML = '';
            renderizarLote();
        }

        function renderizarLote() {
            const container = document.getElementById('grid-produtos');
            const btnVerMais = document.getElementById('btn-ver-mais');
            const inicio = (paginaAtual - 1) * itensPorPagina;
            const fim = inicio + itensPorPagina;
            const lote = produtosFiltrados.slice(inicio, fim);

            lote.forEach((produto, idx) => {
                const card = document.createElement('div');
                card.className = 'card-produto';
                // L√≥gica simplificada de card
                let btnHtml = produto.esgotado ? 
                    `<button class="btn-buy" disabled style="background:#ccc;">Esgotado</button>` : 
                    `<button class="btn-buy" onclick="adicionarItem('${produto.nome}', ${produto.preco})">Comprar</button>`;
                
                card.innerHTML = `
                    <div class="img-container"><img src="${produto.img}" onerror="this.src='https://via.placeholder.com/300?text=Foto+Manu'"></div>
                    <div class="info-produto">
                        <h3>${produto.nome}</h3>
                        <div class="price-box"><span class="price-new">R$ ${produto.preco.toFixed(2).replace('.',',')}</span></div>
                        ${btnHtml}
                    </div>
                `;
                container.appendChild(card);
            });

            if (fim >= produtosFiltrados.length) btnVerMais.style.display = 'none';
            else btnVerMais.style.display = 'block';
        }

        function carregarMaisProdutos() {
            paginaAtual++;
            renderizarLote();
        }

        // --- FILTRO COM ELEVADOR (SCROLL) ---
        function filtrarPorTag(tag, elementoBtn) {
            document.querySelectorAll('.btn-filtro').forEach(btn => btn.classList.remove('ativo'));
            elementoBtn.classList.add('ativo');
            
            if (tag === 'todos') produtosFiltrados = produtosGlobais;
            else produtosFiltrados = produtosGlobais.filter(p => p.tag && p.tag.toLowerCase().includes(tag.toLowerCase()));
            
            resetarPaginacao();
            
            // O Elevador
            const secao = document.getElementById('colecao');
            const y = secao.getBoundingClientRect().top + window.scrollY - 80;
            window.scrollTo({top: y, behavior: 'smooth'});
        }

        // --- CARRINHO B√ÅSICO ---
        function carregarCarrinho() {
            const salvo = localStorage.getItem('carrinhoManu');
            if (salvo) carrinho = JSON.parse(salvo);
            atualizarCarrinhoUI();
        }
        function adicionarItem(nome, preco) {
            const item = carrinho.find(i => i.nome === nome);
            if (item) item.qtd++;
            else carrinho.push({nome, preco, qtd: 1});
            localStorage.setItem('carrinhoManu', JSON.stringify(carrinho));
            atualizarCarrinhoUI();
            abrirCarrinho();
        }
        function atualizarCarrinhoUI() {
            document.getElementById('cart-count').innerText = carrinho.reduce((acc, i) => acc + i.qtd, 0);
            const lista = document.getElementById('itens-carrinho');
            lista.innerHTML = '';
            let total = 0;
            carrinho.forEach(item => {
                total += item.preco * item.qtd;
                lista.innerHTML += `<li class="item-carrinho">${item.qtd}x ${item.nome} - R$ ${(item.preco*item.qtd).toFixed(2)}</li>`;
            });
            document.getElementById('total-carrinho').innerText = 'R$ ' + total.toFixed(2);
        }
        function enviarPedidoWhatsApp() {
            let msg = "Ol√°! Quero fechar meu pedido:\n";
            carrinho.forEach(i => msg += `${i.qtd}x ${i.nome}\n`);
            window.open(`https://wa.me/5537999146764?text=${encodeURIComponent(msg)}`, '_blank');
        }
        
        function toggleMenu() { document.getElementById('nav-menu').classList.toggle('active'); }
        function abrirCarrinho() { document.getElementById('modal-carrinho').classList.add('open'); }
        function fecharCarrinho() { document.getElementById('modal-carrinho').classList.remove('open'); }
    </script>
</body>
</html>
